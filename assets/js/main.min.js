(function(e){"use strict";function t(){e("body").toggleClass("mobile-nav-active"),e(".mobile-nav-toggle").toggleClass("open"),e("#header").toggleClass("header-mobile-nav"),e("#header .container").toggleClass("mobile")}e(window).on("load",function(){e("#preloader").delay(100).fadeOut("slow",function(){e(this).remove()})}),AOS.init({duration:1e3,easing:"ease-in-out",once:!0,mirror:!1}),e(window).scroll(function(){e(this).scrollTop()>100?e("#header").addClass("header-scrolled"):e("#header").removeClass("header-scrolled")}),e(window).scrollTop()>100&&e("#header").addClass("header-scrolled"),e(window).on("scroll",function(){const t=e(this).scrollTop()+80;t<300?(e(".nav-menu, .mobile-nav").find("li").removeClass("active"),e(".nav-menu, .mobile-nav").find("li:first").addClass("active")):t===e(document).height()-e(window).height()+80?(e(".nav-menu, .mobile-nav").find("li").removeClass("active"),e(".nav-menu, .mobile-nav").find("li:last").addClass("active")):e("section").each(function(){const o=e(this).offset().top,n=o+e(this).outerHeight();t>=o&&t<=n&&(t<=n&&e(".nav-menu, .mobile-nav").find("li").removeClass("active"),e(".nav-menu, .mobile-nav").find(`a[href="#${e(this).attr("id")}"]`).parent("li").addClass("active"))})}),e(window).scroll(function(){e(this).scrollTop()>100?e(".back-to-top").fadeIn("slow"):e(".back-to-top").fadeOut("slow")}),e(".back-to-top").click(function(){return e("html, body").animate({scrollTop:0},1500,"easeInOutExpo"),!1}),e(".go-to-contact").click(function(){return e("html, body").animate({scrollTop:e(this.hash).offset().top},1500,"easeInOutExpo"),!1}),e(".mobile-nav").html(e(".nav-menu").html()),e(document).on("click",".mobile-nav-toggle",function(){t()}),e(document).click(function(o){const n=e(".mobile-nav, .mobile-nav-toggle");n.is(o.target)||0!==n.has(o.target).length||e("body").hasClass("mobile-nav-active")&&t()}),e(document).on("click",".nav-menu a, .mobile-nav a",function(o){if(window.location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&window.location.hostname===this.hostname){o.preventDefault();let n=e(this.hash).offset().top;const a=20;n-=e("#header").outerHeight(),e("#header").hasClass("header-scrolled")||(n+=a),"#header"===e(this).attr("href")&&(n=0),e("html, body").animate({scrollTop:n},1500,"easeInOutExpo"),e(".nav-menu .active, .mobile-nav .active").removeClass("active"),e(this).closest("li").addClass("active"),e("body").hasClass("mobile-nav-active")&&t()}}),e(".recommendations-carousel").owlCarousel({autoplay:!0,dots:!0,loop:!0,items:1}),e(".contact-form").submit(function(){const t=e(this).find(".form-group");let o=!1;const n=/^[^\s()<>@,;:/]+@\w[\w.-]+\.[a-z]{2,}$/i;if(t.children("input, textarea").each(function(){const t=e(this);let a=t.attr("data-rule");if(void 0!==a){let e=!1;const i=a.indexOf(":",0);a=i>=0?a.substr(0,i):a.substr(i+1,a.length),("required"===a&&""===t.val()||"email"===a&&!n.test(t.val()))&&(e=!0,o=!0),e?(t.addClass("error"),t.next(".validate").show("blind")):(t.removeClass("error"),t.next(".validate").hide("blind"))}}),e(this).find(".sent-message").slideUp(),e(this).find(".error-message").slideUp(),e(this).find(".error-captcha").slideUp(),o)return e(this).find(".error-message").slideDown().html("Uno o más campos tienen un error. Por favor revisa e inténtalo de nuevo."),!1;if(""===grecaptcha.getResponse())return e(this).find(".error-captcha").slideDown(),!1;e(this).find(".loading").slideDown();const a={name:e(this).find("#name").val(),email:e(this).find("#email").val(),subject:e(this).find("#subject").val(),message:e(this).find("#message").val()},i=`<p><strong>Nombre:</strong> ${a.name}<br>`+`<strong>Email:</strong> ${a.email}<br>`+`<strong>Asunto:</strong> ${a.subject}<br>`+`<strong>Mensaje:</strong> ${a.message}</p>`;return Email.send({SecureToken:"d77754ed-529f-4108-bac2-19ddd2a5765a",To:"cesar.rrguez@gmail.com",From:a.email,Subject:"Nuevo contacto desde la página web",Body:i}).then(t=>{"OK"===t?(e(this).find(".loading").slideUp(),e(this).find(".sent-message").slideDown(),e(this).find("input:not(input[type=submit]), textarea").val("")):(e(this).find(".loading").slideUp(),e(this).find(".error-message").slideDown().html("Hubo un error intentando enviar tu mensaje. Por favor inténtalo de nuevo más tarde."))}),!1})})(window.jQuery);